fid = fopen('SGEMS_Commands.txt','w'); 

% variogramRanges = linspace(10, 60, 21); % 21
variogramRanges = 20;
% variogramRanges = [3 5 8 70 80 90 100];
variogramRange_petro = 20;



for i=1:length(variogramRanges)
variogramRange = variogramRanges(i);

%make grid
fprintf(fid,['NewCartesianGrid  Variogram', num2str(variogramRange),'::10::10::200::1.0::1.0::1.0::0::0::0\n']);
%sisim facies
fprintf(fid, ['RunGeostatAlgorithm  sisim::/GeostatParamUtils/XML::<parameters>  <algorithm name="sisim" />     <Grid_Name value="Variogram', num2str(variogramRange),'" region=""  />     <Property_Name  value="Facies', num2str(variogramRange),'" />     <Nb_Realizations  value="1" />     <Seed  value="', num2str(getseed()),'" />     <Categorical_Variable_Flag  value="1"  />     <Nb_Indicators  value="2" />     <Marginal_Probabilities  value="0.4 0.6" />     <lowerTailCdf  function ="Power"  extreme ="0"  omega ="3" />    <upperTailCdf  function ="Power"  extreme ="0"  omega ="0.333" />    <Median_Ik_Flag  value="1"  />     <Full_Ik_Flag  value="0"  />     <Hard_Data_Grid value="" region=""  />     <Hard_Data_Property  value=""  />     <Assign_Hard_Data  value="1"  />     <coded_grid value="" region=""  />     <coded_props count="0"   value=""  />     <Max_Conditioning_Data  value="12" />     <Search_Ellipsoid  value="20 20 20  0 0 0" />    <AdvancedSearch  use_advanced_search="0"></AdvancedSearch>    <Variogram_Median_Ik  nugget="0.03" structures_count="1"  >    <structure_1  contribution="0.97"  type="Spherical"   >      <ranges max="',num2str(variogramRange) ,'"  medium="1"  min="1"   />      <angles x="0"  y="90"  z="0"   />    </structure_1>  </Variogram_Median_Ik>    <Variogram_Full_Ik  nugget="0" structures_count="1"  >    <structure_1  contribution="0"  type="Spherical"   >      <ranges max="0"  medium="0"  min="0"   />      <angles x="0"  y="0"  z="0"   />    </structure_1>  </Variogram_Full_Ik>    <Variogram_Full_Ik_2  nugget="0" structures_count="1"  >    <structure_1  contribution="0"  type="Spherical"   >      <ranges max="0"  medium="0"  min="0"   />      <angles x="0"  y="0"  z="0"   />    </structure_1>  </Variogram_Full_Ik_2>  </parameters>\n']);   
%set the regions
fprintf(fid, ['SetRegionFromCategoricalPropertyIf  Variogram', num2str(variogramRange),'::Sand', num2str(variogramRange),'::Facies', num2str(variogramRange),'__real0::Category 0\n']);
fprintf(fid, ['SetRegionFromCategoricalPropertyIf  Variogram', num2str(variogramRange),'::Shale', num2str(variogramRange),'::Facies', num2str(variogramRange),'__real0::Category 1\n']);
%copy category so it's integer
fprintf(fid, ['CopyProperty  Variogram', num2str(variogramRange),'::Facies', num2str(variogramRange),'__real0::Variogram', num2str(variogramRange),'::Facies', num2str(variogramRange),'::0::0\n']);


%create the porosity
%sand in region 0
fprintf(fid, ['RunGeostatAlgorithm  sgsim::/GeostatParamUtils/XML::<parameters>  <algorithm name="sgsim" />     <Grid_Name value="Variogram', num2str(variogramRange),'" region="Sand', num2str(variogramRange),'"  />     <Property_Name  value="PhiSand', num2str(variogramRange),'" />     <Nb_Realizations  value="1" />     <Seed  value="', num2str(getseed()),'" />     <Kriging_Type  value="Simple Kriging (SK)"  />     <Trend  value="0 0 0 0 0 0 0 0 0 " />    <Local_Mean_Property  value="Facies', num2str(variogramRange_petro),'"  />     <Variogram  nugget="0.03" structures_count="1"  >    <structure_1  contribution="0.97"  type="Spherical"   >      <ranges max="20"  medium="1"  min="1"   />      <angles x="0"  y="90"  z="0"   />    </structure_1>  </Variogram>    <Assign_Hard_Data  value="1"  />     <Hard_Data  grid="" region="" property=""  />     <Max_Conditioning_Data  value="12" />     <Search_Ellipsoid  value="20 20 20  0 0 0" />    <AdvancedSearch  use_advanced_search="0"></AdvancedSearch>    <Use_Target_Histogram  value="1"  />     <nonParamCdf  ref_on_file ="1"  ref_on_grid ="0"  break_ties ="0" filename ="X:/Research/Petrophysical_inversion/Data_generation_base_case/SandPhiData.txt"   grid =""  property ="">  <LTI_type  function ="No extrapolation"  extreme ="0"  omega ="3" />  <UTI_type  function ="No extrapolation"  extreme ="0"  omega ="0.333" />  </nonParamCdf>  </parameters>\n']);   
%shale in region 1 
fprintf(fid, ['RunGeostatAlgorithm  sgsim::/GeostatParamUtils/XML::<parameters>  <algorithm name="sgsim" />     <Grid_Name value="Variogram', num2str(variogramRange),'" region="Shale', num2str(variogramRange),'"  />     <Property_Name  value="Phi', num2str(variogramRange),'" />     <Nb_Realizations  value="1" />     <Seed  value="', num2str(getseed()),'" />     <Kriging_Type  value="Simple Kriging (SK)"  />     <Trend  value="0 0 0 0 0 0 0 0 0 " />    <Local_Mean_Property  value="Facies', num2str(variogramRange_petro),'"  />     <Assign_Hard_Data  value="1"  />     <Hard_Data  grid="" region="" property=""  />     <Max_Conditioning_Data  value="12" />     <Search_Ellipsoid  value="20 20 20  0 0 0" />    <AdvancedSearch  use_advanced_search="0"></AdvancedSearch>    <Use_Target_Histogram  value="1"  />     <nonParamCdf  ref_on_file ="1"  ref_on_grid ="0"  break_ties ="0" filename ="X:/Research/Petrophysical_inversion/Data_generation_base_case/ShalePhiData.txt"   grid =""  property ="">  <LTI_type  function ="No extrapolation"  extreme ="0"  omega ="3" />  <UTI_type  function ="No extrapolation"  extreme ="0"  omega ="0.333" />  </nonParamCdf>    <Variogram  nugget="0.03" structures_count="1"  >    <structure_1  contribution="0.97"  type="Spherical"   >      <ranges max="20"  medium="1"  min="1"   />      <angles x="0"  y="90"  z="0"   />    </structure_1>  </Variogram>  </parameters>\n']);   
%copy together
fprintf(fid, ['CopyProperty  Variogram', num2str(variogramRange),'::PhiSand', num2str(variogramRange),'__real0::Variogram', num2str(variogramRange),'::Phi', num2str(variogramRange),'__real0::0::0\n']);

%create the clay
%sand
fprintf(fid, ['RunGeostatAlgorithm  sgsim::/GeostatParamUtils/XML::<parameters>  <algorithm name="sgsim" />     <Grid_Name value="Variogram', num2str(variogramRange),'" region="Sand', num2str(variogramRange),'"  />     <Property_Name  value="ClaySand', num2str(variogramRange),'" />     <Nb_Realizations  value="1" />     <Seed  value="', num2str(getseed()),'" />     <Kriging_Type  value="Simple Kriging (SK)"  />     <Trend  value="0 0 0 0 0 0 0 0 0 " />    <Local_Mean_Property  value="Facies', num2str(variogramRange_petro),'"  />     <Assign_Hard_Data  value="1"  />     <Hard_Data  grid="" region="" property=""  />     <Max_Conditioning_Data  value="12" />     <Search_Ellipsoid  value="20 20 20  0 0 0" />    <AdvancedSearch  use_advanced_search="0"></AdvancedSearch>    <Use_Target_Histogram  value="1"  />     <nonParamCdf  ref_on_file ="1"  ref_on_grid ="0"  break_ties ="0" filename ="X:/Research/Petrophysical_inversion/Data_generation_base_case/SandClayData.txt"   grid =""  property ="">  <LTI_type  function ="No extrapolation"  extreme ="0"  omega ="3" />  <UTI_type  function ="No extrapolation"  extreme ="0"  omega ="0.333" />  </nonParamCdf>    <Variogram  nugget="0.03" structures_count="1"  >    <structure_1  contribution="0.97"  type="Spherical"   >      <ranges max="20"  medium="1"  min="1"   />      <angles x="0"  y="90"  z="0"   />    </structure_1>  </Variogram>  </parameters>\n']);   
%clay
fprintf(fid, ['RunGeostatAlgorithm  sgsim::/GeostatParamUtils/XML::<parameters>  <algorithm name="sgsim" />     <Variogram  nugget="0.03" structures_count="1"  >    <structure_1  contribution="0.97"  type="Spherical"   >      <ranges max="20"  medium="1"  min="1"   />      <angles x="0"  y="90"  z="0"   />    </structure_1>  </Variogram>    <Assign_Hard_Data  value="1"  />     <Hard_Data  grid="" region="" property=""  />     <Max_Conditioning_Data  value="12" />     <Search_Ellipsoid  value="20 20 20  0 0 0" />    <AdvancedSearch  use_advanced_search="0"></AdvancedSearch>    <Use_Target_Histogram  value="1"  />     <nonParamCdf  ref_on_file ="1"  ref_on_grid ="0"  break_ties ="0" filename ="X:/Research/Petrophysical_inversion/Data_generation_base_case/ShaleClayData.txt"   grid =""  property ="">  <LTI_type  function ="No extrapolation"  extreme ="0"  omega ="3" />  <UTI_type  function ="No extrapolation"  extreme ="0"  omega ="0.333" />  </nonParamCdf>    <Grid_Name value="Variogram', num2str(variogramRange),'" region="Shale', num2str(variogramRange),'"  />     <Property_Name  value="Clay', num2str(variogramRange),'" />     <Nb_Realizations  value="1" />     <Seed  value="', num2str(getseed()),'" />     <Kriging_Type  value="Simple Kriging (SK)"  />     <Trend  value="0 0 0 0 0 0 0 0 0 " />    <Local_Mean_Property  value="Facies', num2str(variogramRange_petro),'"  />   </parameters>\n']);   
%copy together
fprintf(fid, ['CopyProperty  Variogram', num2str(variogramRange),'::ClaySand', num2str(variogramRange),'__real0::Variogram', num2str(variogramRange),'::Clay', num2str(variogramRange),'__real0::0::0\n']);

%create the saturation
%sand in region 0
fprintf(fid, ['RunGeostatAlgorithm  sgsim::/GeostatParamUtils/XML::<parameters>  <algorithm name="sgsim" />     <Grid_Name value="Variogram', num2str(variogramRange),'" region="Sand', num2str(variogramRange),'"  />     <Property_Name  value="SwSand', num2str(variogramRange),'" />     <Nb_Realizations  value="1" />     <Seed  value="', num2str(getseed()),'" />     <Kriging_Type  value="Simple Kriging (SK)"  />     <Trend  value="0 0 0 0 0 0 0 0 0 " />    <Local_Mean_Property  value="Facies', num2str(variogramRange_petro),'"  />     <Variogram  nugget="0.03" structures_count="1"  >    <structure_1  contribution="0.97"  type="Spherical"   >      <ranges max="20"  medium="1"  min="1"   />      <angles x="0"  y="90"  z="0"   />    </structure_1>  </Variogram>    <Assign_Hard_Data  value="1"  />     <Hard_Data  grid="" region="" property=""  />     <Max_Conditioning_Data  value="12" />     <Search_Ellipsoid  value="20 20 20  0 0 0" />    <AdvancedSearch  use_advanced_search="0"></AdvancedSearch>    <Use_Target_Histogram  value="1"  />     <nonParamCdf  ref_on_file ="1"  ref_on_grid ="0"  break_ties ="0" filename ="X:/Research/Petrophysical_inversion/Data_generation_base_case/SandSwData.txt"   grid =""  property ="">  <LTI_type  function ="No extrapolation"  extreme ="0"  omega ="3" />  <UTI_type  function ="No extrapolation"  extreme ="0"  omega ="0.333" />  </nonParamCdf>  </parameters>\n']);   
%shale in region 1 
fprintf(fid, ['RunGeostatAlgorithm  sgsim::/GeostatParamUtils/XML::<parameters>  <algorithm name="sgsim" />     <Grid_Name value="Variogram', num2str(variogramRange),'" region="Shale', num2str(variogramRange),'"  />     <Property_Name  value="Sw', num2str(variogramRange),'" />     <Nb_Realizations  value="1" />     <Seed  value="', num2str(getseed()),'" />     <Kriging_Type  value="Simple Kriging (SK)"  />     <Trend  value="0 0 0 0 0 0 0 0 0 " />    <Local_Mean_Property  value="Facies', num2str(variogramRange_petro),'"  />     <Assign_Hard_Data  value="1"  />     <Hard_Data  grid="" region="" property=""  />     <Max_Conditioning_Data  value="12" />     <Search_Ellipsoid  value="20 20 20  0 0 0" />    <AdvancedSearch  use_advanced_search="0"></AdvancedSearch>    <Use_Target_Histogram  value="1"  />     <nonParamCdf  ref_on_file ="1"  ref_on_grid ="0"  break_ties ="0" filename ="X:/Research/Petrophysical_inversion/Data_generation_base_case/ShaleSwData.txt"   grid =""  property ="">  <LTI_type  function ="No extrapolation"  extreme ="0"  omega ="3" />  <UTI_type  function ="No extrapolation"  extreme ="0"  omega ="0.333" />  </nonParamCdf>    <Variogram  nugget="0.03" structures_count="1"  >    <structure_1  contribution="0.97"  type="Spherical"   >      <ranges max="20"  medium="1"  min="1"   />      <angles x="0"  y="90"  z="0"   />    </structure_1>  </Variogram>  </parameters>\n']);   
%copy together
fprintf(fid, ['CopyProperty  Variogram', num2str(variogramRange),'::SwSand', num2str(variogramRange),'__real0::Variogram', num2str(variogramRange),'::Sw', num2str(variogramRange),'__real0::0::0\n']);



%output the whole thing
fprintf(fid, ['SaveGeostatGrid  Variogram', num2str(variogramRange),'::X:/Research/Petrophysical_inversion/Data_generation_base_case/facies_clay_porosity_sw_', num2str(variogramRange),'.txt::csv::0::Facies', num2str(variogramRange),'::Clay', num2str(variogramRange),'__real0::Phi', num2str(variogramRange),'__real0::Sw', num2str(variogramRange),'__real0\n\n']);

end
fclose(fid);
